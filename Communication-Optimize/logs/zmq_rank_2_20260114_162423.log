2026-01-14 16:24:23,293 - root - INFO - 日志将保存到: /data/home/chenyu/Coding/SD+SoT/Speculative-Decoding-Enabled-Skeleton-of-Thought/Communication-Optimize/logs/zmq_rank_2_20260114_162423.log
2026-01-14 16:24:25,175 - ZMQ-Rank-2 - INFO - 检测到 CUDA_VISIBLE_DEVICES=7，使用逻辑设备 cuda:0
2026-01-14 16:24:25,175 - ZMQ-Rank-2 - INFO - 初始化ZMQ通信管理器 (mode=ring)
2026-01-14 16:24:25,175 - ZMQComm-Rank2 - INFO - 设置Ring模式 ZMQ sockets
2026-01-14 16:24:25,175 - ZMQComm-Rank2 - INFO - Ring模式 ZMQ sockets设置完成 (prev=1, next=0)
2026-01-14 16:24:25,175 - ZMQComm-Rank2 - INFO - Ring拓扑: prev=1 <- rank2 -> next=0
2026-01-14 16:24:25,175 - ZMQ-Rank-2 - INFO - 等待其他节点就绪 (1.0秒)...
2026-01-14 16:24:26,177 - ZMQComm-Rank2 - INFO - 接收线程启动
2026-01-14 16:24:26,187 - ZMQComm-Rank2 - INFO - Ring发送线程启动
2026-01-14 16:24:26,187 - ZMQComm-Rank2 - INFO - 通信管理器已启动 (RingCommManager)
2026-01-14 16:24:26,188 - ZMQ-Rank-2 - INFO - 初始化设备 Rank 2/3
2026-01-14 16:24:26,473 - ZMQ-Rank-2 - INFO - 加载模型: /data/home/chenyu/Coding/SD+SoT/models/Qwen3-4B
2026-01-14 16:24:28,112 - ZMQ-Rank-2 - INFO - 模型加载完成，共36层
2026-01-14 16:24:28,115 - ZMQ-Rank-2 - INFO - KV Cache 预分配完成（最大长度: 2200）
2026-01-14 16:24:28,115 - ZMQ-Rank-2 - INFO - ============================================================
2026-01-14 16:24:28,115 - ZMQ-Rank-2 - INFO - 开始 Prefill 阶段 (SP+PP with ZMQ)
2026-01-14 16:24:28,123 - ZMQ-Rank-2 - INFO - Prompt长度: 7 tokens
2026-01-14 16:24:28,124 - ZMQ-Rank-2 - INFO - 切分为 1 个chunks (chunk_size=128)
2026-01-14 16:24:28,124 - ZMQ-Rank-2 - INFO - 负责层范围: [24, 36)
2026-01-14 16:24:28,124 - ZMQ-Rank-2 - INFO - 处理 chunk 1/1
2026-01-14 16:24:28,759 - ZMQ-Rank-2 - INFO -   chunk 1 处理完成
2026-01-14 16:24:28,772 - ZMQ-Rank-2 - INFO - First token 同步完成: 220
2026-01-14 16:24:28,774 - ZMQ-Rank-2 - INFO - 等待接收 0 个cache...
2026-01-14 16:24:28,774 - ZMQ-Rank-2 - INFO - 所有cache接收完成
2026-01-14 16:24:28,774 - ZMQ-Rank-2 - INFO - Prefill 总耗时: 0.659s, cache同步耗时: 0.659s, 计算耗时: 0.645s
2026-01-14 16:24:28,774 - ZMQ-Rank-2 - INFO - ============================================================
2026-01-14 16:24:28,774 - ZMQ-Rank-2 - INFO - 开始 Decode 阶段 (全量冗余计算)
2026-01-14 16:24:29,051 - ZMQ-Rank-2 - INFO - 已生成 10 tokens
2026-01-14 16:24:29,291 - ZMQ-Rank-2 - INFO - 已生成 20 tokens
2026-01-14 16:24:29,539 - ZMQ-Rank-2 - INFO - 已生成 30 tokens
2026-01-14 16:24:29,814 - ZMQ-Rank-2 - INFO - 已生成 40 tokens
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO - 已生成 50 tokens
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO - Decode 完成，耗时: 1.341s
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO - ============================================================
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO - 时间统计:
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO -   Prefill 计算时间:     0.645s
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO -   Cache 同步时间:      0.659s
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO -   Prefill 总时间:      0.659s
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO -   通信开销占比:        100.0%
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO -   Decode 时间:        1.341s
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO -   总时间:            2.000s
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO -   Token 发送/接收:   1/1
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO -   Hidden 发送/接收:  2/2
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO -   Cache 发送/接收:   72/72
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO -   聚合发送次数:      7
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO -   转发消息数:        50
2026-01-14 16:24:30,115 - ZMQ-Rank-2 - INFO - ============================================================
2026-01-14 16:24:30,128 - ZMQComm-Rank2 - INFO - Ring发送线程退出
2026-01-14 16:24:30,190 - ZMQComm-Rank2 - INFO - 接收线程退出
2026-01-14 16:24:30,191 - ZMQComm-Rank2 - INFO - 通信管理器已停止
